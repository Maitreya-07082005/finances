<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Manager</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            max-width: 800px;
        }
        h1 {
            text-align: center;
        }
        .input-container {
            margin-bottom: 20px;
        }
        .input-container label {
            margin-right: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        canvas {
            max-width: 100%;
            height: 400px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Personal Finance Manager</h1>
    
    <!-- Transaction Input Section -->
    <div class="input-container">
        <label for="date">Date:</label>
        <input type="date" id="date" required>
        <label for="category">Category:</label>
        <select id="category">
            <option value="Personal Use">Personal Use</option>
            <option value="Food">Food</option>
            <option value="Stationery">Stationery</option>
            <option value="Bills">Bills</option>
            <option value="Others">Others</option>
        </select>
        <label for="type">Type:</label>
        <select id="type">
            <option value="Income">Income</option>
            <option value="Expense">Expense</option>
        </select>
        <label for="amount">Amount:</label>
        <input type="number" id="amount" min="0" step="0.01" required>
        <button onclick="addTransaction()">Add Transaction</button>
    </div>
    
    <!-- Transactions Table -->
    <h3>Transactions</h3>
    <table id="transactions-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Category</th>
                <th>Type</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            <!-- Transactions will appear here -->
        </tbody>
    </table>
    
    <!-- Pie Chart Section -->
    <h3>Visualize Expenses</h3>
    <label for="month-selector">Select Month:</label>
    <input type="number" id="month-selector" min="1" max="12" placeholder="Enter Month (1-12)">
    <button onclick="generatePieChart()">Generate Pie Chart</button>
    <canvas id="pieChart"></canvas>
    
    <script>
        const transactions = [];

        // Function to add a transaction
        function addTransaction() {
            const date = document.getElementById("date").value;
            const category = document.getElementById("category").value;
            const type = document.getElementById("type").value;
            const amount = parseFloat(document.getElementById("amount").value);
            
            if (!date || isNaN(amount)) {
                alert("Please fill in all fields correctly.");
                return;
            }

            transactions.push({ date, category, type, amount });

            // Add transaction to table
            const table = document.getElementById("transactions-table").querySelector("tbody");
            const row = table.insertRow();
            row.insertCell(0).innerText = date;
            row.insertCell(1).innerText = category;
            row.insertCell(2).innerText = type;
            row.insertCell(3).innerText = amount.toFixed(2);

            // Clear input fields
            document.getElementById("date").value = "";
            document.getElementById("amount").value = "";
        }

        // Function to generate a pie chart
        function generatePieChart() {
            const month = parseInt(document.getElementById("month-selector").value);
            if (isNaN(month) || month < 1 || month > 12) {
                alert("Please enter a valid month (1-12).");
                return;
            }

            // Filter transactions by selected month and type
            const monthlyExpenses = transactions
                .filter(t => t.type === "Expense" && new Date(t.date).getMonth() + 1 === month)
                .reduce((acc, t) => {
                    acc[t.category] = (acc[t.category] || 0) + t.amount;
                    return acc;
                }, {});

            if (Object.keys(monthlyExpenses).length === 0) {
                alert(`No expenses found for Month ${month}.`);
                return;
            }

            // Prepare data for the chart
            const labels = Object.keys(monthlyExpenses);
            const data = Object.values(monthlyExpenses);

            // Render the pie chart
            const ctx = document.getElementById("pieChart").getContext("2d");
            new Chart(ctx, {
                type: "pie",
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#9966FF"]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: `Expenses for Month ${month}`
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
